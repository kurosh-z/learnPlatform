const latexSymbs = {
  '\\alpha': 'α',
  '\\Beta': 'Β',
  '\\beta': 'β',
  '\\gamma': 'γ',
  '\\Gamma': 'Γ',
  '\\delta': 'δ',
  '\\Delta': 'Δ',
  '\\epsilon': 'ϵ',
  '\\zeta': 'ζ',
  '\\Zeta': 'Z',
  '\\eta': 'η',
  '\\theta': 'θ',
  '\\Theta': 'Θ',
  '\\iota': 'ι',
  '\\kappa': 'κ',
  '\\lambda': 'λ',
  '\\Lambda': 'Λ',
  '\\mu': 'μ',
  '\\nu': 'ν',
  '\\omicron': 'ο',
  '\\pi': 'π',
  '\\Pi': 'Π',
  '\\rho': 'ρ',
  '\\siqma': 'σ',
  '\\Siqma': 'Σ',
  '\\tau': 'τ',
  '\\upsilon': 'υ',
  // '\\Upsilon': 'Υ',
  '\\phi': 'ϕ',
  '\\Phi': 'Φ',
  '\\chi': 'χ',
  '\\Xi': 'Ξ',
  '\\xi': 'ξ',
  '\\psi': 'ψ',
  '\\Psi': 'Ψ',
  '\\omega': 'ω'
};
const lettersWidth = {
  a: 9.549999618530273,
  b: 8.433333587646484,
  c: 8.316666603088379,
  d: 9.183333587646484,
  // e: 5.949999809265137,
  e: 8.649999809265137,
  // f: 9.399999618530273,
  f: 5.399999618530273,

  g: 9.166666984558105,
  h: 11.066666603088379,
  i: 5.616666793823242,
  j: 7.116666507720947,
  k: 10,
  l: 5.7166666984558105,
  // m: 16.850000381469727,
  m: 14.550000381469727,
  // n: 11.516666412353516,
  n: 10.816666412353516,
  o: 9.316666603088379,
  p: 9.649999618530273,
  q: 9.566666603088379,
  r: 6.666666984558105,
  // s: 9,
  s: 8,
  t: 6.933333396911621,
  u: 10.983333587646484,
  v: 8.816666603088379,
  w: 12.8,
  x: 10.003333587646484,
  y: 9.399999618530273,
  z: 8.933333396911621
};

const capLettersWidth = {
  A: 13.399999618530273,
  B: 13.566666603088379,
  C: 13.733333587646484,
  D: 15.899999618530273,
  E: 14.166666984558105,
  F: 12.350000381469727,
  G: 15.083333015441895,
  H: 15.949999809265137,
  I: 8.449999809265137,
  J: 10.649999618530273,
  K: 16.299999237060547,
  L: 13.083333015441895,
  M: 18.616666793823242,
  N: 15.416666984558105,
  O: 14.649999618530273,
  P: 12.333333015441895,
  Q: 15.183333396911621,
  R: 14.566666603088379,
  S: 11.766666412353516,
  T: 11.216666221618652,
  U: 13.116666793823242,
  V: 11.199999809265137,
  W: 18.116666793823242,
  X: 15.899999618530273,
  Y: 11.149999618530273,
  Z: 13.116666793823242
};

const greekLettersWidth = {
  α: 12.283333778381348,
  β: 10.866666793823242,
  γ: 9.949999809265137,
  Γ: 11.800000190734863,
  δ: 8.516666412353516,
  Δ: 16,
  ϵ: 7.800000190734863,
  ζ: 8.416666984558105,
  η: 9.550000190734863,
  θ: 9,
  Θ: 14.649999618530273,
  ι: 6.800000190734863,
  κ: 11.066666603088379,
  λ: 11.199999809265137,
  Λ: 13.316666603088379,
  μ: 11.583333015441895,
  ν: 9.483333587646484,
  ο: 9.316666603088379,
  π: 10.949999809265137,
  Π: 15.949999809265137,
  ρ: 9.933333396911621,
  σ: 10.966666221618652,
  Σ: 14.983333587646484,
  τ: 8.383333206176758,
  υ: 10.366666793823242,
  Υ: 11.199999809265137,
  ϕ: 11.449999809265137,
  Φ: 12.800000190734863,
  χ: 12.016666412353516,
  Ξ: 14.25,
  ξ: 8.416666984558105,
  ψ: 12.5,
  Ψ: 11.75,
  ω: 11.949999809265137
};

const numbersWidth = {
  0: 9.600000381469727,
  1: 9.600000381469727,
  2: 9.600000381469727,
  3: 9.600000381469727,
  4: 9.600000381469727,
  5: 9.600000381469727,
  6: 9.600000381469727,
  7: 9.600000381469727,
  8: 9.600000381469727,
  9: 9.600000381469727
};

const signsWidth = {
  '!': 5.333333492279053,
  '~': 9.600000381469727,
  '@': 14.933333396911621,
  '#': 16,
  $: 9.600000381469727,
  '%': 16,
  '^': 9.600000381469727,
  '&': 14.933333396911621,
  '*': 9.600000381469727,
  '(': 7.4666666984558105,
  ')': 7.4666666984558105,
  '-': 6.400000095367432,
  _: 9.600000381469727,
  '=': 14.933333396911621,
  '+': 14.933333396911621,
  '[': 5.333333492279053,
  ']': 5.333333492279053,
  '{': 9.600000381469727,
  '}': 9.600000381469727,
  '\\': 9.600000381469727,
  '?': 9.066666603088379,
  '>': 14.933333396911621,
  '<': 14.933333396911621,
  '≤': 14.933333396911621,
  '.': 5.333333492279053,
  '∫': 5.266666889190674, // char: "∫", height: 43.5,
  ' ': 0 // empty char
};
const widthBank = {
  ...lettersWidth,
  ...capLettersWidth,
  ...numbersWidth,
  ...greekLettersWidth,
  ...signsWidth
};

export const getlatexSymbol: (latexString: string) => string = latexString => {
  if (latexString in latexSymbs) return latexSymbs[latexString];
  else if (latexString.charAt(0) !== '\\') return latexString;
  else {
    throw new Error(`latex symbol ${latexString} is not recognized!`);
  }
};

export const getCharWidth: (
  char: string,
  fontSize?: number,
  fontStyle?: 'bold' | 'normal'
) => number = (char, fontSize = 1.2, fontStyle = 'normal') => {
  const boldFactor = fontStyle === 'bold' ? 2 : 1;
  if (char in widthBank) return boldFactor * (fontSize / 1.2) * widthBank[char];
  else throw new Error(`the requested char ${char} dose not exist in the Bank`);
};

export const getStringWidth: (
  str: string,
  fontSize?: number,
  fontStyle?: 'bold' | 'normal'
) => number = (str, fontSize, fontStyle) => {
  const chars = str.split('');
  var strWidth = 0;
  for (const char of chars) {
    strWidth += getCharWidth(char, fontSize, fontStyle);
  }
  return strWidth;
};
